# Задачи (Memory Bank)

## Текущая задача
Создать отдельное окно с правилами игры (Rules Modal)

## Контекст/цели
- Добавить кнопку "RULES" в HeaderBar2 (похожую на PAYTABLE)
- Создать модальное окно RulesModal (похожее на PaytableModal)
- Правила должны быть на английском языке
- Структуру и текст нужно утвердить на русском перед реализацией
- Этапы работы: структура → текст → визуал

## План (микро‑шаги)

### Этап 1: Creative-фаза (утверждение структуры и текста) ✅
1. ✅ Определить структуру правил игры (разделы, порядок, группировка)
   - Структура утверждена: логический порядок от общего к частному
   - Порядок разделов: How to Play → Betting & Balance → CASCADE Mode → Hand Combinations → Cascade Multipliers → Jokers → Deck Clear → Auto Play → TURBO Mode
2. ✅ Утвердить текст правил на русском языке
   - Стиль: сбалансированный (средняя длина, основные факты + краткие пояснения)
   - Все 9 разделов сформулированы на русском
3. ✅ Подготовить английский перевод текста правил
   - Все разделы переведены на английский
   - Терминология соответствует игровому стилю

**Creative-документ:** `memory-bank/creative/creative-rules-modal.md`

**Ключевые решения:**
- Структура: логический порядок (How to Play → Betting → CASCADE → Combinations → Multipliers → Jokers → Deck Clear → Auto → Turbo)
- Стиль текста: сбалансированный (средняя длина, основные факты + краткие пояснения)
- Визуальное оформление: гибридный подход (обычные разделы — простой стиль, Deck Clear — выделение amber border + градиент)
- Ссылка на Paytable: текстовое упоминание с подсказкой о расположении кнопки PAYTABLE

### Этап 2: Реализация UI
4. Добавить состояние `rulesModalOpen` в `useBalatroInfernoController.js`
5. Добавить функцию `setRulesModalOpen` в возвращаемый объект контроллера
6. Добавить кнопку RULES в `HeaderBar2` компонент (рядом с PAYTABLE)
   - Использовать аналогичную структуру и стили как у PAYTABLE
   - Добавить эмодзи/иконку для кнопки
7. Создать компонент `RulesModal.jsx` по аналогии с `PaytableModal.jsx`
   - Структура: Header (RULES) + Scrollable Content + Footer (опционально)
   - Применить стили, аналогичные PaytableModal
   - В разделе "Комбинации" добавить короткое упоминание + ссылку/упоминание Paytable (где есть полный список)
8. Добавить `RulesModal` в `ModalsHost` компонент
9. Передать props для RulesModal из контроллера (аналогично paytable)
10. Реализовать обработчики открытия/закрытия модального окна
11. Добавить поддержку закрытия по Escape и клику на backdrop

## Гейты/проверки
- [x] Структура правил утверждена на русском
- [x] Текст правил утвержден на русском и переведен на английский
- [x] Кнопка RULES визуально соответствует PAYTABLE
- [x] Модальное окно открывается/закрывается корректно
- [x] Правила отображаются читабельно и структурированно
- [x] Модальное окно закрывается по Escape и клику на backdrop
- [x] Линтер не выдает ошибок
- [x] Сборка проекта проходит успешно (`npm run build`)

## Заметки
- Куда класть код: всегда сверяться с `Docs/architecture.md`.
- Компоненты UI: `src/ui/screens/balatro-inferno/`
- Стили: `src/balatroInferno.css`
- Creative-документы: `memory-bank/creative/`

## Файлы для изменения
- `src/ui/screens/balatro-inferno/BalatroInferno.jsx` (добавить кнопку RULES в HeaderBar2)
- `src/ui/screens/balatro-inferno/components/RulesModal.jsx` (новый компонент)
- `src/ui/screens/balatro-inferno/useBalatroInfernoController.js` (добавить состояние для модального окна)

## Критерии успеха
- Кнопка RULES добавлена в HeaderBar2 и визуально соответствует PAYTABLE
- Модальное окно RulesModal создано и работает аналогично PaytableModal
- Правила игры структурированы, читабельны и понятны
- Текст правил на английском языке, структура утверждена на русском
- Модальное окно корректно открывается/закрывается всеми способами
- Визуальное оформление соответствует общему стилю игры
- Код следует архитектуре проекта (UI компоненты в правильных местах)

## Риски/неизвестные
- **Объем контента**: правила могут быть длинными, нужно обеспечить удобную прокрутку
- **Структура правил**: нужно найти баланс между полнотой и читабельностью
- **Визуальное оформление**: нужно решить, как лучше представить разные разделы правил (заголовки, списки, примеры)
- **Перевод**: английский текст должен быть понятным и соответствовать игровой терминологии
- **Мобильная версия**: модальное окно должно хорошо работать на маленьких экранах
- **Ссылка на Paytable**: нужно решить, как реализовать ссылку/кнопку для перехода к Paytable из Rules Modal (возможно, просто текстовое упоминание или кнопка)
