# Creative: Idle Card Interaction (Easter Egg)

## 1. Логика Hide & Peek

### Варианты реализации "Спрятаться за карту"

#### A. Смена DOM-позиции (reordering)
Перемещать элемент в DOM, чтобы изменить порядок наложения.
- **Плюсы**: `z-index` работает "автоматически" (элементы ниже перекрывают верхние).
- **Минусы**: В React ломает анимации списка (Reconciliation), вызывает перерисовки, сложно вернуть на место плавно.

#### B. `z-index` manipulation + `transform`
Оставляем карту в DOM на месте, но меняем `z-index` на меньший, чем у соседа, и сдвигаем `translateX`.
- **Плюсы**: Просто, производительно (composite layers), не ломает React-структуру.
- **Минусы**: Нужно знать `z-index` соседей.
- **Решение**: У нас карты лежат в flex/grid. У всех дефолтный z-index (auto/0).
    - Чтобы спрятаться за соседа СПРАВА: Мой z-index = 0, Соседа = 1 (или выше).
    - Чтобы спрятаться за соседа СЛЕВА: Мой z-index = 0, Соседа = 1.
    - **Проблема**: Если у всех z-index одинаковый, порядок наложения определяется порядком в DOM (последующие перекрывают предыдущие).
        - Карта 0 (слева) ПОД Картой 1 (справа).
        - Значит, Карта 0 легко прячется за Карту 1 (просто сдвиг вправо).
        - А вот Карта 1 лежит НАД Картой 0. Чтобы спрятаться за 0, Карте 1 нужно понизить z-index (отрицательный?) или Карте 0 повысить.

#### C. Рекомендованное решение (B+)
Использовать `z-index` и `transform`.
- Базовый `z-index` у всех карт: `10`.
- При клике 3 (Hide):
    - Активная карта: `z-index: 5` (уходит на задний план).
    - Соседняя карта (за которую прячемся): `z-index: 20` (явно поднимаем, чтобы перекрыть наверняка).
    - Анимация: `transform: translateX(...)`.
- Возврат: сброс `z-index` и `transform`.

## 2. Анимации (CSS Keyframes)

### Shake (1 & 2 click)
- **Weak Shake**: Небольшое вращение (+-2deg) и смещение (+-2px). Быстрое затухание.
- **Strong Shake**: Агрессивное вращение (+-5deg) и смещение (+-5px). Эффект "напряжения".

### Hide & Peek Sequence
Это сложная анимация, лучше разбить на этапы или использовать CSS keyframes с процентами.

`@keyframes hide-peek-right`
- 0%: `transform: translateX(0) rotate(var(--rot))`
- 20%: `transform: translateX(110%) rotate(5deg)` (спряталась)
- 40%: `transform: translateX(110%) rotate(5deg)` (сидит)
- 50%: `transform: translateX(80%) rotate(-5deg)` (выглянула)
- 60%: `transform: translateX(110%) rotate(5deg)` (спряталась обратно)
- 100%: `transform: translateX(0) rotate(var(--rot))` (вернулась)

*Проблема*: Ширина карт адаптивная (`clamp`). `translateX(100%)` сработает корректно (относительно ширины самой карты).
*Нюанс*: Расстояние между картами. В мобилке они могут перекрываться (negative margin) или быть плотно.
*Решение*: Использовать `translateX` в процентах (например, 120% чтобы перепрыгнуть gap).

## 3. State Machine (React)

Компонент `Card` будет иметь внутренний стейт для пасхалки, который сбрасывается, если `isInteractable` становится `false` (начался спин).

- `clickCount`: 0..3
- `lastClickTime`: timestamp
- `animationState`: 'idle' | 'shake-1' | 'shake-2' | 'hiding-left' | 'hiding-right'

Таймер сброса:
- Если между кликами прошло > 2000ms -> сброс `clickCount` на 1.
- Если клик 3 -> запуск длинной анимации, блокировка кликов до конца анимации.

## 4. UI/UX Детали
- **Cursor**: `cursor-pointer` (или custom grab) при наведении в Idle.
- **Hover**: `translateY(-10px)` + `transition`. Должен быть "пружинистым".
- **Sound**: (пока без звука, но заложить возможность).

